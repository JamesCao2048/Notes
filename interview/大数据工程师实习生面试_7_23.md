# 大数据工程师实习生面试题
## 一面
- 简单说一下hbase的架构？hbase的master挂掉之后怎么办？zookeeper挂掉之后怎么办？
  - master和region server
- hbase有索引吗？如果没有索引的话，读数据的时候如何从master通过row_key找到所需要的region server?
  - 猜了下没索引，但不知道没索引如何快速定位的
- sql查询考察group by及聚合函数，答出后进一步考察能否查到max后的非聚合字段
  - 答出了group by后查聚合函数，查非聚合字段只想到了再查一次
  - 再查一次其实可以使用`关联子查询`技术写在一起[https://mp.weixin.qq.com/s/MuxjlFV0gi1GydOrYfiSeQ]
- 给定10G近似均匀分布在0-100G范围的数，找到其中位数，内存只有1G，硬盘读写可以认为是SSD
  - 与剑指offer41题：给定输入流，找到其中位数的问题不同。这种问题假定了所有数据能在内存中存来下，可以用一个最大堆，加一个最小堆来解决，确保最小堆中的所有元素都大于最大堆，并且它们元素个数相等。
  - 也不能使用O(n)时间的基于快排partition的找第k大数的算法，因为也要求要将数据都load进内存。
  - 解法1：先局部排序10次，归并后得到全局排序。归并的时候可能有频繁的硬盘I/O，时间复杂度为10 * n/10 * log n/10
  - 解法2：因为题干中说大致分布均匀，可以从中间的数开始猜，逐渐扩大范围，每次花O(n)时间去check猜的结果是否为中位数。时间复杂度c*O(n^2)，数据分布越均匀常数项c越小。
  - 解法3(未答出)：`桶排序`思想。在内存中初始化20个桶，依次读取数据，按照数值大小将数字分别放入桶中。内存满了就将不同的桶刷新到对应的位置。得到分桶结果后，再对对应桶里面的数字进行排序，时间复杂度为O(n) + n/10*log(n/10)
## 二面
- scrapy爬虫项目的具体架构是怎么样
  - 如何调度的？
  - 爬好之后的数据如何存储，存好之后如何通知对方来用？
  - 某台机器fail之后，其正在爬取的url怎么办？
- hbase的major compaction的区别与minor compaction的区别
  - 未答出
- 随机发56张扑克牌
  - 解法一：初始化一个56个元素的数组，用来记录扑克牌是否被发过。每次产生随机数代表选取剩余扑克牌中第n大的牌，然后遍历数组找到。所需时间为56*56
  - 解法二：得到所有排列,然后随意选一个。生成全排列所需时间为56!，所需存储空间为56!*56
  - 解法三(未答出)：后来想出基于数组元素交换的方法。初始化一个长度为56的数组，然后遍历每个元素的时候随机与后面的元素进行交换。所需时间56
- 大数据量下找前10个最大的数，内存有限
  - 解法一： 利用最小堆，最小堆中存10个元素，每次读入新的元素的时候与堆顶元素比较，如果比它大就将堆顶元素弹出，并且加入新的元素。
  - 解法二(未答出)：将大文件分割为能装入内存的小文件,然后找出每部分最大的前10个元素，然后再进行归并。可以多线程或者多机处理。
  - 参考：[https://blog.csdn.net/zyq522376829/article/details/47686867] 
- 找字符串中最长不重复子串
  - leetcode题滑动窗口[https://github.com/JamesCao2048/CodingQuestions/blob/master/leetcode/problems/3_longest_substring_without_repeating_characters.py]
- 堆排序是怎样的？
  - 快速建堆后依次弹出元素
- python @classmethod和@staticmethod注解有什么不同（未答出）
  - @classmethod修饰的方法第一个参数是cls，绑定类对象，可以对类进行一些处理。
  - @staticmethod修饰的方法第一个参数是正常参数，没有绑定类对象，也就是不能对类进行一些处理
  - 正常方法第一个参数是self，绑定类对象的实例。
  - 参考：[https://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod]
- python如何调用父类方法的？以及其第一个参数是什么？(未答出)
  - super(),第一个参数需要传入子类的cls
  - 参考：[https://www.runoob.com/python/python-func-super.html]
- python中有多线程吗？如何创建一个线程？(未答出)
  - 一个python interpreter中同时只能执行一个线程，只是伪多线程而已。有一个全句解释器锁，GIL
  - 所以python的多线程可以处理IO密集型操作，比如说爬虫，但是无法处理CPU密集型操作，因为同一时间内python的解释器中只运行一个线程的bytecode。
  - 使用`threading`包的Thread类去创建一个新的线程。使用`multiprocessing`库的Process方法去创建新的进程，多进程就能充分利用多核CPU。
  - 参考：[https://www.zhihu.com/question/23474039]
## 总结
- 经验。
  - 要不断沟通确定问题细节。一面的面试官人非常好，出了那道桶排的题后还提醒可以沟通确定问题细节，并且给了大致均匀分布的提醒，但因为没复习到桶排还是没想起来最优解。
  - 可以先考虑粗糙的解法。
  - 与实习岗位关系不大的项目没必要介绍得太详细。
- 总体来看面试题分为项目，算法及语言基础知识。
  - 项目部分会根据我讲的项目深入问一些架构方面的问题，比如容错性，调度等等。
  - 算法部分一小部分是大数据相关的，大部分是常见的算法题。
  - 根据准备的充分程度，回答效果算法>架构>语言。
  - sql, 大数据算法,hbase及scrapy架构容错，python语言细节等还需要加强。
- 架构部分问题答案后续更新。